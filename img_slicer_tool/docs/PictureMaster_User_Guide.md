# PictureMaster 使用说明手册

## 1. 产品简介
PictureMaster 是一款基于 PySide6 的桌面图片编辑工具，集成了图片裁剪与批量切图两大核心能力。它支持高分辨率图片预览、快捷键、鼠标拖拽加载以及可视化切割线管理，帮助设计、运营或内容团队快速生成符合规格的素材。

## 2. 运行环境与准备
- **操作系统**：Windows 10/11、macOS 12+ 或常见 Linux 桌面发行版。
- **Python 版本**：项目自带虚拟环境，推荐 Python 3.10 及以上。
- **依赖安装**：在仓库根目录执行 `pip install -r requirements.txt`。
- **启动方式**：
  1. 进入 `img_slicer_tool` 目录。
  2. 执行 `python main.py` 或 `python -m app`。

## 3. 界面概览
1. **菜单栏**：包含“文件 / 编辑 / 切图”等命令。
2. **状态栏**：显示图片尺寸、模式切换及操作反馈。
3. **工作区（画布）**：居中显示图片，支持滚轮缩放、拖拽平移。
4. **左侧切图工作栏**（仅切图模式可见）：配置切图方式、网格参数、手动工具，以及执行切图。

```
+-------------------------------------------------------------+
| 菜单栏                                                       |
+----+-----------------------------------------------+--------+
|工作|                                               | 状态栏 |
|栏  |                 图片画布                      | 消息   |
|    |                                               |        |
+----+-----------------------------------------------+--------+
```

## 4. 基础操作流程
1. **打开图片**
   - 菜单：文件 → 打开图片（或 `Ctrl+O`）。
   - 直接拖拽本地 jpg/png/jpeg/webp 文件到画布，即可自动加载。
2. **缩放与导航**
   - `Ctrl + 鼠标滚轮`：放大/缩小预览。
   - 按住空格键并拖动鼠标：平移视图。
3. **裁剪模式**
   - 默认进入裁剪模式，可通过拖拽框选区域、执行裁剪保存。
   - 右下状态栏会提示裁剪尺寸及保存结果。
4. **切图模式**
   - 点击菜单“编辑 → 切图模式”或快捷键 `S` 进入。
   - 左侧工作栏会展开，默认停留在手动切割线模式。

## 5. 切图方式与工具
### 5.1 行列生成网格
1. 在工作栏选择“行列生成网格”。
2. 设置行数 / 列数（输入整数即可即时更新）。
3. 画布上会按照图片尺寸平均分布水平/垂直线，支持再次输入自动刷新。
4. 网格模式下，切割线不可手动新增或删除，但可以直接拖动任意线条微调位置。

### 5.2 手动生成切割线
1. 选择“手动生成切割线”，可自由切换以下工具：
   - **水平线**：左键点击，即在该 Y 坐标生成水平线。
   - **垂直线**：左键点击，即在该 X 坐标生成垂直线。
   - **十字线**：一次点击同时生成水平 + 垂直线。
   - **选择工具**：用于选中、拖动或删除切割线。
2. 左键点击已有切割线附近可选中，并以亮橙色高亮；再次拖拽即可移动。
3. 按 `Delete` 删除当前选中的切割线。
4. 热键 `H` / `V` 仍可快速生成水平或垂直线，与当前工具无关。

### 5.3 快速提示
- 生成的切割线会实时同步到底部状态栏的提示。
- 切换回手动模式时，若正在使用网格，将弹窗确认是否清除网格线。

## 6. 执行切图与导出
1. 配置完成后，点击左侧工作栏底部“执行切图”（或菜单 切图 → 执行切图 / `Ctrl+Shift+X`）。
2. 软件会根据当前切割线计算分块矩形，并调用内置算法批量输出：
   - 首次未设置输出目录时，会提示选择文件夹；默认使用原图同级目录。
   - 命名规则：`原图名_rXX_cXX`。
3. 完成后弹出提示框，显示生成的切片数量，并可直接打开输出目录。

## 7. 常用快捷键
| 快捷键 | 功能 |
| --- | --- |
| Ctrl + O | 打开图片 |
| S | 切换到切图模式 |
| Ctrl + G | 菜单触发网格配置对话框 |
| Ctrl + Shift + X | 执行切图 |
| H / V | 在当前鼠标位置生成水平 / 垂直切割线（手动模式） |
| Delete | 删除选中的切割线（手动模式） |
| Space + 拖动 | 平移视图 |
| Ctrl + 滚轮 | 缩放画布 |

## 8. 常见问题
1. **拖拽文件无反应**：请确认文件为本地路径，且格式为 jpg/png/jpeg/webp。
2. **无法生成网格**：需先载入图片后才能启用；若仍失败，检查是否在裁剪模式。
3. **切图输出为空**：若未设置任何切割线，将只导出整张图片，属于正常行为。
4. **删除线失败**：Delete 仅在手动模式下生效，且需要先选中目标线条。

## 9. 反馈与支持
若使用过程中遇到问题或有新的需求，欢迎在项目仓库提交 Issue，或通过团队既定渠道联系产品/开发同学。
